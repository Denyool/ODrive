


<!DOCTYPE html>
<!-- source: https://github.com/pages-themes/minimal/blob/master/_layouts/default.html -->
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Troubleshooting | ODrive</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Troubleshooting" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="High performance motor control" />
<meta property="og:description" content="High performance motor control" />
<link rel="canonical" href="https://github.com/pages/madcowswe/ODrive/troubleshooting.html" />
<meta property="og:url" content="https://github.com/pages/madcowswe/ODrive/troubleshooting.html" />
<meta property="og:site_name" content="ODrive" />
<script type="application/ld+json">
{"@type":"WebPage","description":"High performance motor control","headline":"Troubleshooting","url":"https://github.com/pages/madcowswe/ODrive/troubleshooting.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/pages/madcowswe/ODrive/assets/css/style.css?v=6cc9893d7480b0947d8eb36ae9c1f77b86028a55">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <div>
          <h1><a href="https://github.com/pages/madcowswe/ODrive/">ODrive Documentation</a></h1>

          

          <p>High performance motor control</p>
        </div>
        <div style="overflow-y: auto;">
          <ul id="navbar">
            
            <li class="navgroup">
              <p class="navheader">General</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/" alt="Getting Started">Getting Started</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/odrivetool" alt="ODrive Tool">ODrive Tool</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/commands" alt="Parameters & Commands">Parameters & Commands</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/interfaces" alt="Interfaces">Interfaces</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/encoders" alt="Encoders">Encoders</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/endstops" alt="Homing & Endstops">Homing & Endstops</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/control" alt="Control & Tuning">Control & Tuning</a></li>
                
                
                
                
                <li><a class="navitem currentitem" href="/pages/madcowswe/ODrive/troubleshooting" alt="Troubleshooting">Troubleshooting</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Tutorials</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/hoverboard" alt="Hoverboard Guide">Hoverboard Guide</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">API Reference</p>
              <ul>
                
                


<li>

  <input id="chk-ODrive" type="checkbox"  hidden />
  <p class="navitem"><label for="chk-ODrive" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive">ODrive</a></p>
  <ul class="expandable-list">

    <li>
    
      <input id="chk-ODrive.Can" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.Can" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.can">Can</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.can.config">Config</a></p>
        </li>

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.can.error">Error</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.can.protocol">Protocol</a></p>
        </li>
      </ul>
    </li>
    <li>
      <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.endpoint">Endpoint</a></p>
    </li>
    <li>
    
      <input id="chk-ODrive.Axis" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.Axis" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.axis">Axis</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.axis.lockinconfig">LockinConfig</a></p>
        </li>
        <li>
        
          <input id="chk-ODrive.Axis.Config" type="checkbox"  hidden />
          <p class="navitem"><label for="chk-ODrive.Axis.Config" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.axis.config">Config</a></p>
          <ul class="expandable-list">

            <li>
              <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.axis.config.calibrationlockin">CalibrationLockin</a></p>
            </li>

          </ul>
        </li>

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.axis.error">Error</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.axis.lockinstate">LockinState</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.axis.axisstate">AxisState</a></p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Motor" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.Motor" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.motor">Motor</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.motor.currentcontrol">CurrentControl</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.motor.gatedriver">GateDriver</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.motor.timinglog">TimingLog</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.motor.config">Config</a></p>
        </li>

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.motor.error">Error</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.motor.armedstate">ArmedState</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.motor.motortype">MotorType</a></p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Controller" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.Controller" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.controller">Controller</a></p>
      <ul class="expandable-list">

        <li>
        
          <input id="chk-ODrive.Controller.Config" type="checkbox"  hidden />
          <p class="navitem"><label for="chk-ODrive.Controller.Config" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.controller.config">Config</a></p>
          <ul class="expandable-list">

            <li>
              <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.controller.config.anticogging">Anticogging</a></p>
            </li>

          </ul>
        </li>

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.controller.error">Error</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.controller.controlmode">ControlMode</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.controller.inputmode">InputMode</a></p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Encoder" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.Encoder" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.encoder">Encoder</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.encoder.config">Config</a></p>
        </li>

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.encoder.error">Error</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.encoder.mode">Mode</a></p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.SensorlessEstimator" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.SensorlessEstimator" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.sensorlessestimator">SensorlessEstimator</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.sensorlessestimator.config">Config</a></p>
        </li>

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.sensorlessestimator.error">Error</a></p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.TrapezoidalTrajectory" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.TrapezoidalTrajectory" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.trapezoidaltrajectory">TrapezoidalTrajectory</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.trapezoidaltrajectory.config">Config</a></p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Endstop" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.Endstop" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.endstop">Endstop</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.endstop.config">Config</a></p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.SystemStats" type="checkbox"  hidden />
      <p class="navitem"><label for="chk-ODrive.SystemStats" class="chevron"></label><a href="/pages/madcowswe/ODrive/api/odrive.systemstats">SystemStats</a></p>
      <ul class="expandable-list">

        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.systemstats.usb">Usb</a></p>
        </li>
        <li>
          <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.systemstats.i2c">I2C</a></p>
        </li>

      </ul>
    </li>
    <li>
      <p style="padding-left: 27px;" class="navitem"><a href="/pages/madcowswe/ODrive/api/odrive.config">Config</a></p>
    </li>

  </ul>
</li>
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">For ODrive Developers</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/developer-guide" alt="Firmware Developer Guide">Firmware Developer Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/configuring-vscode" alt="Configuring Visual Studio Code">Configuring Visual Studio Code</a></li>
                
                
                
                
                <li><a class="navitem" href="/pages/madcowswe/ODrive/configuring-eclipse" alt="Configuring Eclipse">Configuring Eclipse</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Component Guides</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/12vzz7XVEK6YNIOqH0jAz51F5VUpc-lJEs3mmkWP1H4Y" alt="Motor Guide">Motor Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/1OBDwYrBb5zUPZLrhL98ezZbg94tUsZcdTuwiVNgVqpU" alt="Encoder Guide">Encoder Guide</a></li>
                
                
              </ul>
            </li>
            
          </ul>
        </div>
        <div style="margin-top: 10px;">
          
          <p class="view"><a href="https://github.com/madcowswe/ODrive">View the Project on GitHub <small>madcowswe/ODrive</small></a></p>
          

          
          
          <p>Help improve these docs: submit edits using the link in the top right.</p>
          <p>If you need help, please search or ask the <a href=https://discourse.odriverobotics.com>ODrive Community</a>.</p>

          
        </div>
      </header>
      <section>

        <div class="pageactions">
          <div>
            <!-- edit icon taken from GitHub -->
            <svg transform="translate(0,1)" class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="10" height="12" aria-hidden="true">
              <path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path>
            </svg>
            
            <a href="https://www.github.com/madcowswe/ODrive/edit/master/docs/troubleshooting.md">edit on GitHub</a>
          </div>

          
        </div>


      <h1 id="troubleshooting">Troubleshooting</h1>

<p>Table of Contents:
<!-- TOC depthFrom:2 depthTo:2 --></p>

<ul>
  <li><a href="#error-codes">Error codes</a></li>
  <li><a href="#common-axis-errors">Common Axis Errors</a></li>
  <li><a href="#common-motor-errors">Common Motor Errors</a></li>
  <li><a href="#common-encoder-errors">Common Encoder Errors</a></li>
  <li><a href="#common-controller-errors">Common Controller Errors</a></li>
  <li><a href="#usb-connectivity-issues">USB Connectivity Issues</a></li>
  <li><a href="#firmware-issues">Firmware Issues</a></li>
  <li><a href="#other-issues-that-may-not-produce-an-error-code">Other issues that may not produce an error code</a></li>
</ul>

<!-- /TOC -->

<h2 id="error-codes">Error codes</h2>
<p>If your ODrive is not working as expected, run <code class="language-plaintext highlighter-rouge">odrivetool</code> and type <code class="language-plaintext highlighter-rouge">dump_errors(odrv0)</code> <kbd>Enter</kbd>. This will dump a list of all the errors that are present. To also clear all the errors, you can run <code class="language-plaintext highlighter-rouge">dump_errors(odrv0, True)</code>.</p>

<p>The following sections will give some guidance on the most common errors. You may also check the code for the full list of errors:</p>
<ul>
  <li>Axis error flags defined <a href="../Firmware/MotorControl/axis.hpp">here</a>.</li>
  <li>Motor error flags defined <a href="../Firmware/MotorControl/motor.hpp">here</a>.</li>
  <li>Encoder error flags defined <a href="../Firmware/MotorControl/encoder.hpp">here</a>.</li>
  <li>Controller error flags defined <a href="../Firmware/MotorControl/controller.hpp">here</a>.</li>
  <li>Sensorless estimator error flags defined <a href="../Firmware/MotorControl/sensorless_estimator.hpp">here</a>.</li>
</ul>

<h2 id="common-axis-errors">Common Axis Errors</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_INVALID_STATE = 0x01</code></li>
</ul>

<p>You tried to run a state before you are allowed to. Typically you tried to run encoder calibration or closed loop control before the motor was calibrated, or you tried to run closed loop control before the encoder was calibrated.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_DC_BUS_UNDER_VOLTAGE = 0x02</code></li>
</ul>

<p>Confirm that your power leads are connected securely. For initial testing a 12V PSU which can supply a couple of amps should be sufficient while the use of low current ‘wall wart’ plug packs may lead to inconsistent behaviour and is not recommended.</p>

<p>You can monitor your PSU voltage using liveplotter in odrive tool by entering <code class="language-plaintext highlighter-rouge">start_liveplotter(lambda: [odrv0.vbus_voltage])</code>. If you see your votlage drop below ~ 8V then you will trip this error. Even a relatively small motor can draw multiple kW momentary and so unless you have a very large PSU or are running of a battery you may encounter this error when executing high speed movements with a high current limit. To limit your PSU power draw you can limit your motor current and/or velocity limit <code class="language-plaintext highlighter-rouge">odrv0.axis0.controller.config.vel_limit</code> and <code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.current_lim</code>.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_DC_BUS_OVER_VOLTAGE = 0x04</code></li>
</ul>

<p>Confirm that you have a brake resistor of the correct value connected securly and that <code class="language-plaintext highlighter-rouge">odrv0.config.brake_resistance</code> is set to the value of your brake resistor.</p>

<p>You can monitor your PSU voltage using liveplotter in odrive tool by entering <code class="language-plaintext highlighter-rouge">start_liveplotter(lambda: [odrv0.vbus_voltage])</code>. If during a move you see the voltage rise above your PSU’s nominal set voltage then you have your brake resistance set too low. This may happen if you are using long wires or small gauge wires to connect your brake resistor to your odrive which will added extra resistance. This extra resistance needs to be accounted for to prevent this voltage spike. If you have checked all your connections you can also try increasing your brake resistance by ~ 0.01 Ohm at a time to a maximum of 0.05 greater than your brake resistor value.</p>

<h2 id="common-motor-errors">Common Motor Errors</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_PHASE_RESISTANCE_OUT_OF_RANGE = 0x0001</code> and <code class="language-plaintext highlighter-rouge">ERROR_PHASE_INDUCTANCE_OUT_OF_RANGE = 0x0002</code></li>
</ul>

<p>During calibration the motor resistance and <a href="https://en.wikipedia.org/wiki/Inductance">inductance</a> is measured. If the measured motor resistance or inductance falls outside a set range this error will be returned. Check that all motor leads are connected securely.</p>

<p>The measured values can be viewed using odrivetool as is shown below:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>In [2]: odrv0.axis0.motor.config.phase_inductance
Out[2]: 1.408751450071577e-05

In [3]: odrv0.axis0.motor.config.phase_resistance
Out[3]: 0.029788672924041748
</code></pre></div></div>
<p>Some motors will have a considerably different phase resistance and inductance than this. For example, gimbal motors, some small motors (e.g. &lt; 10A peak current). If you think this applies to you try increasing <code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.resistance_calib_max_voltage</code> from its default value of 1 using odrivetool and repeat the motor calibration process. If your motor has a small peak current draw (e.g. &lt; 20A) you can also try decreasing <code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.calibration_current</code> from its default value of 10A.</p>

<p>In general, you need</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resistance_calib_max_voltage &gt; calibration_current * phase_resistance
resistance_calib_max_voltage &lt; 0.5 * vbus_voltage
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_DRV_FAULT = 0x0008</code></li>
</ul>

<p>The ODrive v3.4 is known to have a hardware issue whereby the motors would stop operating
when applying high currents to M0. The reported error of both motors in this case
is <code class="language-plaintext highlighter-rouge">ERROR_DRV_FAULT</code>.</p>

<p>The conjecture is that the high switching current creates large ripples in the
power supply of the DRV8301 gate driver chips, thus tripping its under-voltage fault detection.</p>

<p>To resolve this issue you can limit the M0 current to 40A. The lowest current at which the DRV fault was observed is 45A on one test motor and 50A on another test motor. Refer to <a href="https://discourse.odriverobotics.com/t/drv-fault-on-odrive-v3-4/558">this post</a> for instructions for a hardware fix.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_MODULATION_MAGNITUDE = 0x0080</code></li>
</ul>

<p>The bus voltage was insufficent to push the requested current through the motor.
If you are getting this during motor calibration, make sure that <code class="language-plaintext highlighter-rouge">motor.config.resistance_calib_max_voltage</code> is no more than half your bus voltage.</p>

<p>For gimbal motors, it is recommended to set the <code class="language-plaintext highlighter-rouge">motor.config.calibration_current</code> and <code class="language-plaintext highlighter-rouge">motor.config.current_lim</code> to half your bus voltage, or less.</p>

<h2 id="common-encoder-errors">Common Encoder Errors</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_CPR_POLEPAIRS_MISMATCH = 0x02</code></li>
</ul>

<p>Confirm you have entered the correct count per rotation (CPR) for <a href="https://docs.odriverobotics.com/encoders">your encoder</a>. The ODrive uses your supplied value for the motor pole pairs to measure the CPR. So you should also double check this value.</p>

<p>Note that the AMT encoders are configurable using the micro-switches on the encoder PCB and so you may need to check that these are in the right positions. If your encoder lists its pulse per rotation (PPR) multiply that number by four to get CPR.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_NO_RESPONSE = 0x04</code></li>
</ul>

<p>Confirm that your encoder is plugged into the right pins on the odrive board.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_INDEX_NOT_FOUND_YET = 0x20</code></li>
</ul>

<p>Check that your encoder is a model that has an index pulse. If your encoder does not have a wire connected to pin Z on your odrive then it does not output an index pulse.</p>

<h2 id="common-controller-errors">Common Controller Errors</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ERROR_OVERSPEED = 0x01</code></li>
</ul>

<p>Try increasing <code class="language-plaintext highlighter-rouge">&lt;axis&gt;.controller.config.vel_limit</code>. The default <code class="language-plaintext highlighter-rouge">vel_limit</code> of 20,000 encoder counts per second gives a motor speed of only ~146 RPM with the common CUI-AMT102 8192 count per rotation encoder. Note: Even if you do not commanded your motor to exceed <code class="language-plaintext highlighter-rouge">vel_limit</code> sudden changes in the load placed on a motor may cause this speed to be temporarily exceeded, resulting in this error.</p>

<p>You can also try increasing <code class="language-plaintext highlighter-rouge">&lt;axis&gt;.controller.config.vel_limit_tolerance</code>. The default value of 1.2 means it will only allow a 20% violation of the speed limit. You can set the <code class="language-plaintext highlighter-rouge">vel_limit_tolerance</code> to 0 to disable the check altogether.</p>

<h2 id="usb-connectivity-issues">USB Connectivity Issues</h2>

<ul>
  <li>Try turning it off and on again (the ODrive, the script, the PC)</li>
  <li>Make sure you’re using the latest firmware and python tools release</li>
  <li><strong>Linux</strong>: Type <code class="language-plaintext highlighter-rouge">lsusb</code> to list all USB devices. Verify that your ODrive is listed.</li>
  <li><strong>Linux</strong>: Make sure you <a href="getting-started#downloading-and-installing-tools">set up your udev rules</a> correctly.</li>
  <li><strong>Windows</strong>: Right-click on the start menu and open “Device Manager”. Verify that your ODrive is listed.</li>
  <li><strong>Windows</strong>: Use the <a href="http://zadig.akeo.ie/">Zadig utility</a> to verify the driver is set to <code class="language-plaintext highlighter-rouge">libusb-win32</code>. Note that there are two options listed in Zadig for Odrive: <code class="language-plaintext highlighter-rouge">ODrive 3.x Native Interface (Interface 2)</code> and <code class="language-plaintext highlighter-rouge">ODrive 3.x CDC Interface (Interface 0)</code>. Only the native interface should have <code class="language-plaintext highlighter-rouge">libusb-win32</code> while the CDC interface should use <code class="language-plaintext highlighter-rouge">WinUSB</code>.</li>
  <li>Ensure that no other ODrive program is running</li>
  <li>Run <code class="language-plaintext highlighter-rouge">odrivetools</code> with the <code class="language-plaintext highlighter-rouge">--verbose</code> option.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">PYUSB_DEBUG=debug odrivetools</code> to get even more log output.</li>
  <li>If you’re a developer you can use Wireshark to capture USB traffic.</li>
  <li>Try a different USB cable</li>
  <li>Try routing your USB cable so that it is far away from the motor and PSU cables to reduce EMI</li>
</ul>

<h2 id="firmware-issues">Firmware Issues</h2>

<h3 id="failure-to-build-the-firmware-when-running-make">Failure to build the firmware when running <code class="language-plaintext highlighter-rouge">make</code></h3>
<ul>
  <li>Clear out temporary files from previous compiles by first running <code class="language-plaintext highlighter-rouge">make clean</code> to prevent conflicts.</li>
  <li><strong>Windows users</strong>: Confirm that tup has been correctly added to path by running <code class="language-plaintext highlighter-rouge">env|grep PATH</code> in Git Bash. If you see no mention of tup then you must <a href="https://docs.alfresco.com/4.2/tasks/fot-addpath.html">add its location to your PATH environment variable.</a>. Note that you may need to restart for the added path to take effect.</li>
</ul>

<h3 id="failure-to-flash-the-firmware-when-running-make-flash">Failure to flash the firmware when running <code class="language-plaintext highlighter-rouge">make flash</code></h3>
<ul>
  <li>If using an ST-link, confirm that the ST-link is connected the correct pins and that you have power supplied to the board. This can be by the 5V pin on the ST link or the main DC power jack. No power is supplied over the USB connection.</li>
</ul>

<h2 id="other-issues-that-may-not-produce-an-error-code">Other issues that may not produce an error code</h2>

<h3 id="motor-cuts-off-or-spins-uncontrollably-at-high-rotational-speeds-ie--5000-rpm">Motor cuts off or spins uncontrollably at high rotational speeds (ie: &gt; 5000 RPM)</h3>
<ul>
  <li>You may be approaching the limit of your encoder. The 2400 count/rotation encoders that were initially included with odrive are realistically limited to around 5000 RPM. Exceeding this speed causes the odrive to lose track of position. This can only be fixed by using an alternative encoder or gearing down the output of your motor onto your encoder so that it still sees &lt; 5000RPM at full speed. If using the gearing options be sure to change your counts/rotation accordingly.</li>
</ul>

<h3 id="motor-vibrates-when-stationary-or-makes-constant-noise">Motor vibrates when stationary or makes constant noise</h3>

<ul>
  <li>Likely due to incorrect gains, specifically <code class="language-plaintext highlighter-rouge">vel_gain</code> may be set too high. Try following the <a href="/pages/madcowswe/ODrive/control.html#Tuning">tuning procedure</a>.</li>
  <li>Check encoder shaft connection. Grub screws may vibrate lose with time. If using a CUI shaft encoder try remounting the plastic retaining ring and confirm that it is not coming into contact with the encoder housing. Also confirm that the encoder is securely mounted.</li>
  <li>If you are using a high resolution encoder (&gt;4000 counts/rotation) then increasing encoder_pll_bandwidth may help reduce vibration.</li>
  <li>If you connect your motor to an object with a large moment of inertia (such as a flywheel) this will help reduce vibrations at high gians. However, make sure that all connections are ridged. Cheap shaft couplers or belts under low tension can introduce enough flex into a system that the motor may still vibrate independently.</li>
</ul>

<h3 id="motor-overshoots-target-position-or-oscillates-back-and-forth">Motor overshoots target position or oscillates back and forth</h3>
<ul>
  <li>Likely due to incorrect gains for a given motor current limit. Specifically <code class="language-plaintext highlighter-rouge">pos_gain</code> is set too high. Try following the <a href="/pages/madcowswe/ODrive/control.html#Tuning">tuning procedure</a>.</li>
  <li>Increase the current limit of your motor for more torque.</li>
</ul>

<h3 id="motor-slowly-starts-to-increase-in-speed">Motor slowly starts to increase in speed</h3>
<ul>
  <li>Encoder has likely slipped. This may occur when your motor makes a hard stop or violently vibrates causing something to come lose. Power the board off and on again so that it undertakes a new calibration. If you are using an index search on startup then you will need to repeat the index calibration process.</li>
</ul>

<h3 id="motor-feels-like-it-has-less-torque-than-it-should-andor-gets-hot-sitting-still-while-under-no-load">Motor feels like it has less torque than it should and/or gets hot sitting still while under no load.</h3>
<ul>
  <li>Encoder has likely slipped causing the motor controller to commutate the wrong windings slightly which reduces output torque and produces excess heat as the motor ‘fights itself’.</li>
  <li>This can also be caused if the rotor bell slips on the motor shaft. On some motors the rotor bell is secured against the shaft with a grub screw. Confirm that this screw is tight enough. For further details on how to resolve this issue see <a href="https://discourse.odriverobotics.com/t/motor-gets-hot-has-less-torque-in-one-direction-than-the-other/2394">this forum post</a>.</li>
</ul>

<h3 id="false-steps-or-direction-changes-when-using-stepdir">False steps or direction changes when using step/dir</h3>
<ul>
  <li>Prior to Odrive board V3.5 no filtering is present on the GPIO pins used for step/dir interface and so inductively coupled noise may causes false steps to be detected. Odrive V3.5 and has onboard filtering to resolve this issue.</li>
  <li>If you experience this issue use a twisted pair cable between your microcontroller that’s generating the step/dir signals and your odrive board. A section cut from cat-5 cable works well as does just twisting some normal insulated wire together.</li>
  <li>Ensure that the step/dir signal cables are not draped over the odrive board, are not running in parallel to the motor or power supply cables.</li>
  <li>If the above does not resolve your issue on V3.4 boards and lower try adding a ~22 Ohm resistor in series with the step and direction pins along with a ~ 4.7 nF capacitor between the ground pin and the step and dir pins such as shown <a href="https://cdn.discordapp.com/attachments/369667319280173069/420811057431445504/IMG_20180306_211224.jpg">here</a>.</li>
</ul>


      </section>
      <!--<footer>
        
        <p>This project is maintained by <a href="https://github.com/madcowswe">madcowswe</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>-->
    </div>
    <script src="/pages/madcowswe/ODrive/assets/js/scale.fix.js"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-93396600-3', 'auto');
      ga('send', 'pageview');
    </script>
    
    <script type="text/javascript">
      // Rewrite all links that start with "../" to point to the GitHub repo
      window.onload = function(){
        var links = document.links;
        var i = links.length;
        while (i--) {
          if (links[i].getAttribute("href").slice(0, 3) == "../") {
            links[i].href = "https://github.com/madcowswe/ODrive/blob/master/" + links[i].getAttribute("href").slice(3);
          }
          if (links[i].getAttribute("href").slice(0, 15) == "getting-started") {
            links[i].href = "/" + links[i].getAttribute("href").slice(15);
          }
        }
      }
    </script>
    <script>
      // Scroll the navbar to the position of the selected item
      var element = document.getElementsByClassName("currentitem")[0];
      element.scrollIntoView(false);
    </script>
  </body>
</html>

